# ###############################################################################
# Blueyescat tarafÄ±ndan Skript ile Discord Botu Ã¶rneÄŸi 
#
# GÃ¼zel/kullanÄ±ÅŸlÄ± komut (Ã§oklu Ã¶nek) ve evaluate sistemleri iÃ§eriyor.
#
# Vixio, TuSKe ve SkQuery Skript addonlarÄ± gerektirir
# ###############################################################################

options:
	#Bot Tokeni
	#
	#Botunun tokenini buradan alabilirsin: https://discordapp.com/developers
	token: ""
	
	#DeÄŸiÅŸtirilmesi Ã¶nemli deÄŸil (Discord'daki kullanÄ±cÄ± adÄ± deÄŸil)
	botName: "DiscordBotu"

	#Komut Ã–nekleri
	#
	#EÄŸer komut Ã¶neklerinde emoji kullanmak istiyorsan, bu emojilerin unicode karakterlerini buradan al: https://emojipedia.org
	#Ã–rnek olarak Discord'da :apple: emojisi: "ğŸ"
	#
	#EÄŸer botunun bahsetme etiketini kullanmak istiyorsan direkt olarak "@kullanÄ±cÄ±AdÄ±" kullanabilirsin.
	prefixes: "! " and "!" # "! " (boÅŸluklu) "!" (boÅŸluksuz)'dan Ã¶nce gelmek zorunda.

	#YÃ¶netici kullanÄ±cÄ±larÄ±n 18 haneli Discord ID'leri
	#
	#For more than one admins you must use "or" instead of "and" on the list like "", "" or ""
	#Birden fazla yÃ¶netici iÃ§in listede "and" yerine "or" kullanmak zorundasÄ±n. "", "" or "" gibi.
	admins: ""

#Sadece Skript eklentisi aktifleÅŸtirildiÄŸinde Discord botuna/hesabÄ±na giriÅŸ yapmayÄ± dener
#Sunucuyu yeniden baÅŸlatmayÄ± gerektirir!
on skript load:
	login to user with token {@token} with name {@botName}

on guild message received seen by {@botName}:
	#
	#Komut FormatÄ±
	#
	loop {@prefixes}:
		if event-string starts with "%loop-value%":
			set {_prefix} to loop-value
			set {_strings::*} to split regex replace all "(.*?)\n```" with "$1 ```" in event-string at " "
			if {_prefix} contains " ":
				set {_command} to {_strings::2}
				delete {_strings::1} and {_strings::2}
			else:
				set {_command} to subtext of {_strings::1} from character (length of {_prefix}) + 1 to length of {_strings::1}
				delete {_strings::1}
			set {_arg::*} to {_strings::*}
			set {_arguments} to join {_arg::*} with " "
			stop loop
	#
	#Komut sistemi iÃ§in mÃ¼mkÃ¼n deÄŸiÅŸkenler:
	# {_prefix} - {_command} - {_arguments} - {_arg::<sayÄ±>}
	#
	if {_command} is set:
		if {_command} is "eval" or "evaluate":
			if event-user is {@admins}:
				if {_arguments} is set:
					#
					#Argumentlerin baÅŸÄ±nda ki boÅŸluklarÄ± siler
					#
					set {_arguments} to regex replace "^\s+" with "" in {_arguments}
					#
					#Kod bloklarÄ±ndan Skript kodunu alÄ±r (Tek satÄ±r komut bloÄŸu desteÄŸi eklemedim)
					#
					if first 3 characters of {_arguments} is "```":
						if last 3 characters of {_arguments} is "```":
							if first 5 characters of {_arguments} is "```vb": #Kod bloklarÄ±nda Visual Basic dili desteÄŸi
								set {_arguments} to subtext of {_arguments} from character 7 to (length of {_arguments} - 3)
							else:
								set {_arguments} to subtext of {_arguments} from character 4 to (length of {_arguments} - 3)
						else:
							create embed "evaluate"
							set title of embed "evaluate" to ":x: GeÃ§ersiz Kod BloÄŸu!"
							set color of embed "evaluate" to "RED"
							send embed "evaluate" to channel event-channel with {@botName}
							delete embed "evaluate"
							stop
					#
					#Skript kodunu kullanÄ±r ve eÄŸer hata varsa alÄ±r
					#
					evaluate logging in {_errors::*}: {_arguments}
					if {_errors::*} is set:
						#
						#HatalarÄ± gÃ¼zelce formatlar
						#
						loop {_errors::*}:
							set {_parse::*} to loop-value parsed as "%text% \(TuSKe\/evaluate.sk, line %integer%\: %text%'\)"
							add "**SatÄ±r %{_parse::2}%:** *%{_parse::1}%*%nl%**>** ``%{_parse::3}%``" to {_lines::*}
						create embed "evaluate"
						set title of embed "evaluate" to ":x: Evaluate HatalarÄ± (%size of {_errors::*}%)"
						set description of embed "evaluate" to join {_lines::*} with nl
						set color of embed "evaluate" to "RED"
						send embed "evaluate" to channel event-channel with {@botName}
						delete embed "evaluate"
		else if {_command} is "temizle", "clear" or "purge":
			if event-user is {@admins}:
				if {_arguments} parsed as number is set:
					clear {_arguments} parsed as number messages in event-channel with {@botName}
				else:
					reply with ":exclamation: **Komut KullanÄ±mÄ±: %{_prefix}%**%{_command}% <Mesaj SayÄ±sÄ± 1-100>"
			else:
				reply with ":x: Bu komutu sadece yÃ¶neticiler kullanabilir!"
